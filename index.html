<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />

    <title>JSON loose</title>

    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap-reboot.min.css"
    />
    <style>
      .content {
        max-width: 760px;
        margin: 0 auto;
        padding: 3rem 1rem;
      }

      pre {
        margin-bottom: 3rem;
        padding: 1rem;
        background-color: var(--bs-secondary-bg);
        border-radius: 0.5rem;
      }
    </style>
  </head>

  <body>
    <div class="content">
      <h2>Input</h2>
      <pre id="input"></pre>

      <h2>Output</h2>
      <pre id="output"></pre>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/moo/moo.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/json-loose/dist/index.umd.js"></script>
    <script>
      const input = `[
  "foo",
  true,
  [1, 2, wife],
  {
    [n]: 'Bambang Ekalaya',
    username: "@palgunadi",
    age: 30,
    address: [{city:city}, [country]],
    skills: skills,
    isStudent: true,
    relation: {
      wife: wife,
      guru: guru,
      [bar]: "qux"
    },
  },
]`

      const context = {
        n: "name",
        skills: "Archery",
        city: "Nishada",
        country: "Aravalli",
        wife: "Anggraini",
        guru: "Drona"
      }
      const output = JSON.parse(jsonLoose(input, context))

      console.log(output)
      document.querySelector("#input").textContent = input
      document.querySelector("#output").textContent = JSON.stringify(
        output,
        null,
        2
      )
    </script>
  </body>
</html>
